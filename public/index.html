<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nuDoors DIY Estimator</title> <!-- Simplified Title -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Add favicon links (optional but good practice) -->
    <!-- <link rel="icon" href="/assets/favicon.ico" sizes="any"> -->
    <!-- <link rel="icon" href="/assets/favicon.svg" type="image/svg+xml"> -->
</head>
<body>
    <header>
        <img src="assets/logo.png" alt="nuDoors Logo">
        <h1>DIY Door Estimator</h1>
        <button type="button" id="themeToggleBtn" title="Toggle Theme">☀️</button>
    </header>

    <!-- Main Wizard Container -->
    <div id="wizard">

        <!-- Step 1: Sections -->
        <div class="wizard-step active" id="step-1">
            <div class="step-indicator">Step 1 of 3</div>
            <h2 class="step-title">Measure Sections</h2>
            <p class="step-instructions">
                Separate your project into sections (see example). Enter dimensions, styles, and finish for each. Use "+ Add Section" for more.
            </p>
            <div id="exampleImageContainer">
                <button type="button" id="toggleExampleBtn">Show Example Image</button>
                 <div id="exampleImage" style="display: none;"> <img src="assets/examplebreakdown.png" alt="Example Breakdown"> </div>
            </div>
            <div id="roughEstimateContainer">
                <div id="sectionsContainer"></div>
                <button type="button" id="addSectionBtn">+ Add Section</button>
            </div>
            <div class="step-navigation">
                <button type="button" class="wizard-nav-btn prev" disabled>Previous</button>
                <button type="button" class="wizard-nav-btn next">Next</button> <!-- Simplified -->
            </div>
        </div>

        <!-- Step 2: Piece Count -->
        <div class="wizard-step" id="step-2">
            <div class="step-indicator">Step 2 of 3</div>
            <h2 class="step-title">Count Pieces</h2>
            <p class="step-instructions">
                Enter the TOTAL number of Drawers, Doors (by height), and Lazy Susans for the whole project.
            </p>
            <div class="part" id="hingeDrilling">
                <label for="numDrawers">Number of Drawers (Total):</label>
                <input type="number" id="numDrawers" name="numDrawers" value="0" min="0" step="1" inputmode="numeric" />
                <label for="doors_0_36">Doors 0" - 36" (Total Height):</label>
                <input type="number" id="doors_0_36" name="doors_0_36" value="0" min="0" step="1" inputmode="numeric" />
                <label for="doors_36_60">Doors 36.01" - 60" (Total Height):</label>
                <input type="number" id="doors_36_60" name="doors_36_60" value="0" min="0" step="1" inputmode="numeric" />
                <label for="doors_60_82">Doors 60.01" - 82" (Total Height):</label>
                <input type="number" id="doors_60_82" name="doors_60_82" value="0" min="0" step="1" inputmode="numeric" />
                <label for="lazySusanQty">Number of Lazy Susans (Total):</label>
                <input type="number" id="lazySusanQty" name="lazySusanQty" value="0" min="0" step="1" inputmode="numeric" />
            </div>
            <div class="step-navigation">
                <button type="button" class="wizard-nav-btn prev">Previous</button> <!-- Simplified -->
                <button type="button" class="wizard-nav-btn next">Next</button> <!-- Simplified -->
            </div>
        </div>

        <!-- Step 3: Special Features -->
        <div class="wizard-step" id="step-3">
            <div class="step-indicator">Step 3 of 3</div>
            <h2 class="step-title">Special Features</h2>
            <p class="step-instructions">
                Need custom paint matching? Enter the number of custom colors below.
            </p>
            <div class="part" id="specialFeatures">
                <label for="customPaintQty">Custom Paint Quantity:</label>
                <input type="number" id="customPaintQty" name="customPaintQty" value="0" min="0" step="1" inputmode="numeric" />
                <small>Enter '1' or more for custom paint ($200 fee per color).</small>
            </div>
            <div id="formActions">
                <button type="button" id="calculateBtn">Calculate Estimate</button>
            </div>
            <div class="step-navigation">
                <button type="button" class="wizard-nav-btn prev">Previous</button> <!-- Simplified -->
                <button type="button" class="wizard-nav-btn next" disabled>Next</button>
            </div>
        </div>

        <!-- Step 4: Results -->
        <div class="wizard-step" id="step-4">
            <div id="results">
                 <div class="invoice-loading">
                     <p>Calculating your estimate...</p>
                 </div>
            </div>
            <!-- Print/Save button container -->
            <div id="printButtonContainer" style="display: none;">
                <button type="button" id="printEstimate">Print Estimate</button>
                <button type="button" id="saveEstimatePdf">Save as PDF</button> <!-- Added Save Button -->
                <p class="print-instructions"><small>Tip: To save as PDF, choose "Save as PDF" as the Destination/Printer in the print dialog.</small></p>
            </div>
            <!-- Start Over button -->
            <div class="step-navigation" style="justify-content: center;">
                <button type="button" id="startOverBtn" class="wizard-nav-btn prev">Start Over</button>
            </div>
        </div>

    </div> <!-- End Wizard -->

    <script src="script.js"></script>
</body>
</html>
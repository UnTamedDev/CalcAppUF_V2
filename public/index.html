<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nuDoors DIY Estimator - New Style</title> <!-- Simple Title -->
    <!-- Add Poppins Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap" rel="stylesheet"> <!-- Added 600 weight -->
    <style>
        /* Reset and Base Styles Inspired by Style6.css */
        * {
            border: 0;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        :root {
             --primary-color-style6: #26c6da; /* Tealish Blue */
             --secondary-color-style6: #ef5350; /* Reddish */
             --text-color-style6: #555; /* Dark Grey text */
             --text-color-light-style6: #757575; /* Lighter Grey */
             --bg-color-forms: #eee; /* Form background */
             --bg-color-main: #ecf0f3; /* Light grey base */
             --bg-gradient: linear-gradient(135deg, #cfd8dc 0%, #607d8b 100%, #b0bec5 100%);
             --shadow-convex-outer: 6px 6px 12px #cbced1, -6px -6px 12px #ffffff; /* Adjusted shadow */
             --shadow-inset: inset 5px 5px 10px #cbced1, inset -5px -5px 10px #ffffff; /* Adjusted inset shadow */
             --border-radius-container: 10px; /* Consistent radius */
             --border-radius-button: 8px; /* Button radius */
             --border-radius-input: 8px; /* Input radius */
             --transition-duration: 0.4s; /* Smoother transition */
        }

        html {
            height: 100%;
        }

        body {
            width: 100%;
            min-height: 100vh;
            display: flex;
            flex-direction: column; /* Stack header and wizard */
            align-items: center; /* Center direct children horizontally */
            padding: 2em;
            background: var(--bg-color-main); /* Solid background */
            font-family: 'Poppins', sans-serif;
            color: var(--text-color-style6);
            font-size: 16px;
            line-height: 1.5; /* Improved line height */
        }

        /* Header */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            max-width: 900px; /* Max width */
            margin: 0 auto 2em auto; /* Center and add bottom margin */
            padding-bottom: 1em;
            border-bottom: 1px solid #ddd; /* Subtle separator */
            flex-wrap: wrap;
            box-sizing: border-box;
        }
        header h1 {
            font-weight: 900;
            font-size: 1.8em;
            color: var(--primary-color-style6);
            letter-spacing: 0.5px;
            margin: 0;
        }
        header img {
            height: 45px; /* Adjusted size */
            width: auto;
            display: block;
            max-height: 45px;
        }

        /* Wizard Container */
        #wizard {
            position: relative;
            width: 100%;
            max-width: 900px; /* Max width */
            background-color: var(--bg-color-forms); /* Use form background */
            border-radius: var(--border-radius-container);
            box-shadow: var(--shadow-convex-outer);
            overflow: hidden; /* Hide overflowing steps */
            margin-bottom: 2em;
            padding: 0; /* Remove padding here, add to steps */
            box-sizing: border-box;
        }

        /* Wizard Step Styling & Transition */
        .wizard-step {
           width: 100%;
           position: absolute;
           top: 0;
           left: 0;
           padding: 30px 40px; /* Padding inside step */
           box-sizing: border-box;
           background-color: var(--bg-color-forms); /* Match container */
           opacity: 0;
           visibility: hidden;
           transform: translateX(30px); /* Start slightly off-screen right */
           transition: opacity var(--transition-duration) ease-out,
                       transform var(--transition-duration) ease-out,
                       visibility 0s linear var(--transition-duration);
        }
        .wizard-step.active {
            opacity: 1;
            visibility: visible;
            transform: translateX(0);
            position: relative; /* Take space */
            transition: opacity var(--transition-duration) ease-out,
                        transform var(--transition-duration) ease-out,
                        visibility 0s linear 0s;
        }
        .wizard-step.hiding {
            opacity: 0;
            visibility: visible;
            transform: translateX(-30px); /* Slide out left */
            position: absolute; /* Don't affect layout */
            transition: opacity var(--transition-duration) ease-out,
                        transform var(--transition-duration) ease-out,
                        visibility 0s linear var(--transition-duration);
        }
        #wizard { min-height: 500px; } /* Adjust as needed */


        .step-title {
            font-weight: 900; /* Bolder title */
            margin-top: 0; /* Remove top margin */
            margin-bottom: 1em;
            color: var(--primary-color-style6);
            font-size: 1.6rem;
            letter-spacing: 0.5px;
        }
         .step-instructions {
            font-weight: 400;
            margin-bottom: 1.5em;
            color: var(--text-color-light-style6);
            font-size: 1em;
            line-height: 1.5;
            text-align: center;
         }
         .step-navigation {
             display: flex;
             justify-content: space-between;
             margin-top: 2.5em; /* More space above nav */
             padding-top: 1.5em;
             border-top: 1px solid #ccc; /* Slightly darker separator */
         }
         .step-indicator {
             text-align: center;
             margin-bottom: 1.5em; /* More space */
             font-weight: 600;
             color: var(--primary-color-style6);
             opacity: 0.7;
             font-size: 0.9em;
         }

        /* Example Image Toggle/Container */
        #exampleImageContainer { margin-bottom: 1.5em; text-align: center; }
        #toggleExampleBtn { margin-bottom: 1em; }
        #exampleImage { text-align: center; margin-top: 1em; display: none; }
        #exampleImage img { max-width: 90%; height: auto; border-radius: 10px; box-shadow: var(--shadow-convex-outer); } /* Outset shadow */

        /* Form Sections Styling */
        .part, .section {
            background-color: #f8f8f8; /* Consistent background */
            padding: 20px;
            margin-bottom: 20px;
            border-radius: var(--border-radius-container);
            box-shadow: var(--shadow-inset);
            text-align: left;
        }
        #roughEstimateContainer h2, .part h2 {
             font-size: 1.1rem;
             font-weight: 600;
             color: var(--primary-color-style6);
             margin-bottom: 1em;
             padding-bottom: 0.3em;
             border-bottom: 1px solid #ddd;
             text-align: left;
        }

        /* Sections Container & Individual Section */
        #sectionsContainer {
            display: flex; flex-wrap: wrap; gap: 1.5em;
            margin-bottom: 1.5em; justify-content: center;
        }
        .section {
            flex-grow: 0; flex-shrink: 1;
            flex-basis: calc(25% - 0.75em); /* 4 columns */
            max-width: calc(25% - 0.75em);
            min-width: 280px; /* Min width */
            box-sizing: border-box;
            padding: 15px;
        }
         .section-header { display: flex; justify-content: center; align-items: center; margin-bottom: 1em; }
         .section-id { font-weight: 600; font-size: 0.9em; color: #fff; background-color: var(--primary-color-style6); padding: 3px 8px; border-radius: 5px; }
         #addSectionBtn { margin-top: 0; } /* Reset margin if needed */

        /* General Form Elements */
        label, input, button, select { display: block; width: 100%; padding: 0; border: none; outline: none; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
        label { margin-bottom: 6px; font-size: 0.85em; font-weight: 600; color: #666; text-align: left; padding-left: 10px; }
        label:not(:first-child) { margin-top: 15px; }
        input::placeholder { color: #aaa; }
        input[type="number"], select {
            background: var(--bg-color);
            padding: 10px 20px; /* Adjusted padding */
            height: 50px;
            font-size: 14px;
            border-radius: var(--border-radius-input);
            box-shadow: var(--shadow-inset);
            color: var(--text-color-style6);
            text-align: left;
            margin-top: 0;
        }
         input[type="number"]:focus, select:focus { box-shadow: var(--shadow-inset), 0 0 0 2px rgba(38, 198, 218, 0.3); /* Focus ring */ }
         select { appearance: none; -webkit-appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='%23777' viewBox='0 0 16 16'%3E%3Cpath fill-rule='evenodd' d='M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 15px center; background-size: 16px 12px; padding-right: 40px; }

        /* Button Styles */
        button {
            color: white;
            margin-top: 20px;
            background: var(--primary-color-style6);
            height: 45px; /* Slightly taller */
            border-radius: var(--border-radius-button);
            cursor: pointer;
            font-weight: 900; /* Bolder */
            box-shadow: var(--shadow-convex-outer);
            transition: 0.3s ease;
            font-size: 0.9em;
            letter-spacing: 0.5px;
        }
        button:hover { box-shadow: none; filter: brightness(1.1); } /* Brighter on hover */
        button:disabled { background: #ccc !important; box-shadow: var(--shadow-inset); cursor: not-allowed; color: #888; }

        /* Specific Buttons */
        #addSectionBtn, .wizard-nav-btn, #calculateBtn, #toggleExampleBtn, #startOverBtn, #printEstimate, #toggleDetailsBtn { width: auto; padding-left: 25px; padding-right: 25px; display: inline-block; }
        .wizard-nav-btn.prev, #startOverBtn { background: #b0bec5; box-shadow: 6px 6px 6px #a0acb1, -6px -6px 6px #c0ced3; color: #546e7a;}
        .wizard-nav-btn.prev:hover, #startOverBtn:hover { box-shadow: none; filter: brightness(1.05); }
        #calculateBtn { font-size: 1.1em; }
        #toggleExampleBtn, #toggleDetailsBtn { margin-top: 0; height: 35px; font-size: 0.8em; background: #d1d9e6; color: var(--text-color-light-style6); box-shadow: var(--shadow-convex-inner); font-weight: 600;}
        #toggleExampleBtn:hover, #toggleDetailsBtn:hover { box-shadow: none; }
        button.remove-button { background: var(--secondary-color-style6); color: white; height: 30px; width: auto; padding: 0 15px; font-size: 0.8em; font-weight: 600; margin-top: 10px; box-shadow: 3px 3px 3px #d89997, -3px -3px 3px #ffadab; border-radius: 15px; display: block; margin-left: auto; }
        button.remove-button:hover { box-shadow: none; filter: brightness(1.1); }

        /* Results & Invoice */
        #results { margin-top: 2em; background: transparent; border: none; padding: 0; overflow-x: visible; }
        .invoice {
            max-width: 80%; min-width: 320px; margin: 0 auto; /* Removed top/bottom margin */ padding: 2em;
            border-radius: var(--border-radius-container); background: var(--bg-color); /* Match body bg */
            box-shadow: var(--shadow-convex-outer); color: var(--text-color-style6); border: none;
        }
        .invoice-header { text-align: center; margin-bottom: 1.5em; padding-bottom: 1.5em; border-bottom: 1px solid #d1d9e6; }
        .invoice-header h1 { color: var(--primary-color-style6); margin-bottom: 0.2em; font-size: 1.8em; font-weight: 900; }
        .invoice-header p { font-size: 0.9em; color: #777; }
        .invoice h2 { font-size: 1.3em; color: var(--primary-color-style6); margin-bottom: 1em; border-bottom: none; font-weight: 900; text-align: center; }
        .summary-table, .details-table { width: 100%; border-collapse: separate; border-spacing: 0 0.5em; margin-bottom: 1.5em; }
        .summary-table td, .details-table td { padding: 0.8em 1em; border-bottom: none; vertical-align: middle; }
        .summary-table tr, .details-table tr { background: #f8f8f8; border-radius: var(--border-radius-input); box-shadow: var(--shadow-inset); }
        .summary-table .table-label, .details-table td:first-child { text-align: left; padding-right: 1em; color: #555; font-weight: 600;}
        .summary-table .table-value, .details-table td:last-child { text-align: right; font-weight: 900; color: #333; }
        .summary-table tfoot { border-top: 2px solid #ccc; margin-top: 1em; }
        .summary-table tfoot td { border-bottom: none; padding-top: 1em; }
        .summary-table .total-row td { font-size: 1.2em; font-weight: 900; color: var(--primary-color-style6); padding-top: 1em; background: none; box-shadow: none; }
        .details-section { margin-top: 1.5em; padding: 1.5em; background: #f0f0f0; border-radius: 8px; border: 1px solid #ddd; box-shadow: var(--shadow-inset);}
        .details-section h3 { font-size: 1.1em; color: var(--primary-color-style6); margin-bottom: 1em; text-align: center; font-weight: 900;}
        .details-table td { padding: 0.5em 0.8em; font-size: 0.9em; }
        .details-table tr { border-radius: 0.6em; background: #fff; box-shadow: inset 2px 2px 3px #ddd, inset -2px -2px 3px #fff;}
        #toggleDetailsBtn { margin-bottom: 1.5em; max-width: 200px; }
        .estimate-footer { text-align: center; margin-top: 2em; font-size: 0.85em; color: #777; }
        #printButtonContainer { margin-top: 1.5em; text-align: center; display: none; }
        #printEstimate { padding: 0.8em 1.5em; font-size: 1em; width: auto; }
        small { display: block; font-size: 0.85em; color: #888; margin-top: 5px; margin-left: 5px; line-height: 1.3; text-align: left; }
        .invoice-error { padding: 1em; background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; border-radius: 5px; margin: 1em auto; max-width: 80%; }
        .invoice-error p { margin: 0.2em 0; }

        /* Responsive */
        @media (max-width: 992px) { /* Wider breakpoint for section stacking */
             .section {
                 flex-basis: calc(33.33% - 1em); /* 3 columns */
                 max-width: calc(33.33% - 1em);
             }
        }
        @media (max-width: 768px) {
            body { padding: 1em; }
            header h1 { font-size: 1.5em; }
            #wizard { padding: 20px; max-width: 95%; }
            .section {
                 flex-basis: calc(50% - 0.5em); /* 2 columns */
                 max-width: calc(50% - 0.5em);
                 min-width: 0; /* Let it shrink */
             }
            #otherPartsContainer .part { flex-basis: 100%; min-width: 0; }
            .step-navigation { flex-direction: column; gap: 0.8em; }
            .wizard-nav-btn { width: 100%; max-width: none; }
             #addSectionBtn, #toggleExampleBtn, #toggleDetailsBtn, #startOverBtn, #printEstimate { width: 100%; max-width: 250px; margin-left: auto; margin-right: auto; display: block;} /* Center toggle buttons */
             button.remove-button { width: auto; padding: 5px 15px; margin-top: 1em; }
            .invoice { max-width: 95%; padding: 1.5em; }
        }
        @media (max-width: 480px) {
             header h1 { font-size: 1.3em; }
             .wizard-step { padding: 15px; }
             .step-title { font-size: 1.4rem; }
             .section { flex-basis: 100%; max-width: 100%; } /* Stack sections */
             input[type="number"], select { height: 45px; padding: 8px 15px; font-size: 13px; }
             button { height: 40px; font-size: 0.9em;}
             label { font-size: 0.85em;}
             small { font-size: 0.8em;}
             .invoice { padding: 1em; }
        }

        /* Print Styles */
    	@media print {
            /* Simplified Print styles */
            body { background: white !important; color: black !important; margin: 1in; font-size: 10pt; font-family: 'Times New Roman', Times, serif;}
            header, #wizard .step-navigation, #wizard .step-indicator, #exampleImageContainer, #results button, form button:not(#calculateBtn), button.remove-button { display: none !important; }
            #wizard { box-shadow: none !important; padding: 0 !important; margin: 0 !important; width: 100% !important; max-width: 100% !important;}
            .wizard-step, .part, .section { background: none !important; box-shadow: none !important; border: 1px solid #ccc !important; padding: 1em !important; margin-bottom: 1em !important; display: block !important; width: 100% !important; max-width: 100% !important; }
            h2, .step-title, label { color: black !important; text-align: left; }
            input, select { border: 1px solid #ccc !important; background: white !important; color: black !important; box-shadow: none !important; border-radius: 0 !important; }
            select { background-image: none !important; }
            small { color: #333 !important; }
            #internalDetails:not(.print-section) { display: none !important; }
            #internalDetails.print-section { display: block !important; background-color: #f8f8f8 !important; border: 1px solid #ccc !important; margin-top: 1.5em !important; padding: 1em !important; color: black !important; box-shadow: none !important; }
            #internalDetails.print-section .details-table td { color: black !important; border-bottom: 1px solid #eee !important; background: none !important; box-shadow: none !important;}
            #internalDetails.print-section h3 { color: black !important; text-align: left; }
            #results { margin-top: 0; border: none; padding: 0; background-color: white; color: black; }
            .invoice { border: 1px solid #ccc; box-shadow: none !important; padding: 1em; max-width: 100% !important; background: white !important; color: black !important; }
            .invoice-header { border-bottom: 1px solid #ccc; text-align: center; }
            .invoice-header img.invoice-logo { display: none !important; }
            .invoice-header h1, .invoice-header p { color: black !important; text-align: center; }
            .invoice h2 { color: black !important; text-align: left; }
            .summary-table tr, .details-table tr { background: none !important; box-shadow: none !important;}
            .summary-table td, .details-table td { border-bottom: 1px solid #eee !important; color: black !important; padding: 0.4em;} /* Tighter print padding */
            .summary-table .table-label, .details-table td:first-child { color: #333 !important; }
            .summary-table .total-row td { color: black !important; border-top: 2px solid #aaa; }
            .estimate-footer { color: #555 !important; }
    	}
    </style>
</head>
<body>
    <header>
        <img src="assets/logo.png" alt="Logo">
        <h1>DIY Door Estimator</h1>
    </header>

    <!-- Main Wizard Container -->
    <div id="wizard">

        <!-- Step 1: Sections -->
        <div class="wizard-step active" id="step-1">
            <div class="step-indicator">Step 1 of 3</div>
            <h2 class="step-title">Measure Sections</h2>
            <p class="step-instructions">
                Separate your project into sections (see example). Enter dimensions, styles, and finish for each. Use "+ Add Section" for more.
            </p>
            <div id="exampleImageContainer">
                <button type="button" id="toggleExampleBtn">Show Example Image</button>
                <div id="exampleImage"> <img src="assets/examplebreakdown.png" alt="Example Breakdown"> </div>
            </div>
            <form id="calcFormStep1">
                <div id="roughEstimateContainer">
                    <div id="sectionsContainer" class="flex-row"></div> <!-- Sections appear here -->
                    <button type="button" id="addSectionBtn">+ Add Section</button>
                </div>
            </form>
            <div class="step-navigation">
                <button type="button" class="wizard-nav-btn prev" disabled>Previous</button>
                <button type="button" class="wizard-nav-btn next">Next: Piece Count</button>
            </div>
        </div>

        <!-- Step 2: Piece Count -->
        <div class="wizard-step" id="step-2">
            <div class="step-indicator">Step 2 of 3</div>
            <h2 class="step-title">Count Pieces</h2>
            <p class="step-instructions">
                Enter the TOTAL number of Drawers, Doors (by height), and Lazy Susans for the whole project.
            </p>
            <form id="calcFormStep2">
                <div class="part" id="hingeDrilling">
                    <label>Number of Drawers (Total):</label>
                    <input type="number" name="numDrawers" value="0" min="0" />
                    <label>Doors 0" - 36" (Total Height):</label>
                    <input type="number" name="doors_0_36" value="0" min="0" />
                    <label>Doors 36.01" - 60" (Total Height):</label>
                    <input type="number" name="doors_36_60" value="0" min="0" />
                    <label>Doors 60.01" - 82" (Total Height):</label>
                    <input type="number" name="doors_60_82" value="0" min="0" />
                    <label>Number of Lazy Susans (Total):</label>
                    <input type="number" name="lazySusanQty" value="0" min="0" />
                </div>
            </form>
            <div class="step-navigation">
                <button type="button" class="wizard-nav-btn prev">Previous: Sections</button>
                <button type="button" class="wizard-nav-btn next">Next: Special Features</button>
            </div>
        </div>

        <!-- Step 3: Special Features -->
        <div class="wizard-step" id="step-3">
            <div class="step-indicator">Step 3 of 3</div>
            <h2 class="step-title">Special Features</h2>
            <p class="step-instructions">
                Need custom paint matching? Enter the number of custom colors below.
            </p>
            <form id="calcFormStep3">
                <div class="part" id="specialFeatures">
                    <label>Custom Paint Quantity:</label>
                    <input type="number" name="customPaintQty" value="0" min="0" />
                    <small>Enter '1' or more for custom paint ($200 fee per color).</small>
                </div>
                <div id="formActions" style="margin-top: 2em; text-align: center;">
                    <button type="button" id="calculateBtn">Calculate Estimate</button>
                </div>
            </form>
            <div class="step-navigation">
                <button type="button" class="wizard-nav-btn prev">Previous: Piece Count</button>
                <button type="button" class="wizard-nav-btn next" disabled>Next</button>
            </div>
        </div>

        <!-- Step 4: Results -->
        <div class="wizard-step" id="step-4">
            <div id="results"></div> <!-- Results injected here -->
            <div id="printButtonContainer">
                <button type="button" id="printEstimate">Print Estimate</button>
            </div>
            <div style="text-align: center; margin-top: 1em;">
                <button type="button" id="startOverBtn" class="wizard-nav-btn prev">Start Over</button>
            </div>
        </div>

    </div> <!-- End Wizard -->

    <script src="script.js"></script>
</body>
</html>